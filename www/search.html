<html>
<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline'; style-src 'self' 'unsafe-inline'; media-src *" />
    <!-- Good default declaration:
    * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
    * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
    * Disables use of eval() and inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
        * Enable inline JS: add 'unsafe-inline' to default-src
        * Enable eval(): add 'unsafe-eval' to default-src
    * Create your own at http://cspisawesome.com
    -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: 'unsafe-inline' https://ssl.gstatic.com; style-src 'self' 'unsafe-inline'; media-src *" /> -->

    <link rel="stylesheet" type="text/css" href="css/search.css" />
	
    <title>User Search</title>
    <script src="https://www.gstatic.com/firebasejs/6.6.0/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/6.6.0/firebase-database.js"></script>
			
    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyAaxutQrCMkYk5YkJcIu7NGvAdQid6RDcM",
            authDomain: "happyplace-d452c.firebaseapp.com",
            databaseURL: "https://happyplace-d452c.firebaseio.com",
            projectId: "happyplace-d452c",
            storageBucket: "",
            messagingSenderId: "297057551997",
            appId: "1:297057551997:web:e71ab01c6b1f325b8f1314"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        database = firebase.database();
        var ref = database.ref('UserList');
        ref.on('value',gotData);
        var keys;
        function gotData(data){
            var userdata = data.val();
            keys = Object.keys(userdata);
            console.log(keys);
            
        }
    </script>
</head>
    
<body>
    <div class="header">
		<a href = "feed.html" class="Top">Happy Place</a>
	</div>
    <div class="container">
	<form class="example" action="action_page.php">
        <input type="text" id="searchbar"  placeholder="Search by username" name="search">
        <input type="button" value="Search!" id = 'submit' onclick="searchfun()">

    </form>
    <ul id="myUL">
        
    </ul>
    
    </div>
    <script>
        function searchfun(){
            var searchKeyword = document.getElementById("searchbar").value;
            var ul = document.querySelector("ul");

            console.log(searchKeyword);
            for (var i=0; i<keys.length;i++){
                if (searchKeyword == keys[i]){
                    if (ul.hasChildNodes()) {
                        ul.removeChild(ul.childNodes[0]);
                        var myWindow = window.open("popup.html", "_self");
                    }
                    var listItem = document.createElement("li");
                    listItem.textContent = keys[i];
                    ul.appendChild(listItem);
                }
            }
        }

        
        </script>
    <div class="navbar">
		<a href="googleMaps.html" class="nav">Map</a>
		<a href="feed.html" class="nav">Feed</a>
		<a href="profile.html" class="nav">Profile</a>
		<a href="search.html" class="nav">Search</a>
	</div>
</body>
</html>
